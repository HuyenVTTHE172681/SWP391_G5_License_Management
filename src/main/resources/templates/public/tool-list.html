<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div id="toolList" th:fragment="toolList">
    <th:block th:if="${#lists.isEmpty(tools)}">
        <div class="col-12 text-center py-4 text-muted">
            <h5>Kh√¥ng c√≥ s·∫£n ph·∫©m ph√π h·ª£p</h5>
        </div>
    </th:block>
    <th:block th:each="tool : ${tools}">
        <div class="row g-4">
            <div class="col-md-4" th:each="tool : ${tools}">
                <a th:href="@{'/tools/' + ${tool.toolId}}" class="product-card">
                    <div class="product-image">
                        <div class="favorite-icon" onclick="toggleFavorite(event, this)">
                            <i class="far fa-heart"></i>
                        </div>
                        <img th:src="${tool.image != null ? tool.image : '/placeholder.svg?height=250&width=350'}" alt="Product">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name" th:text="${tool.toolName}"></h3>
                        <div class="product-rating">
                            <div class="stars">
                            <span th:each="i : ${#numbers.sequence(1,5)}">
            <i th:classappend="${i <= tool.averageRating} ? 'fas fa-star text-warning' :
                                (${i - tool.averageRating < 1} ? 'fas fa-star-half-alt text-warning' : 'far fa-star text-warning')"></i>
        </span>
                            </div>
                            <span class="review-count" th:text="${tool.totalReviews + ' reviews'}"></span>
                        </div>
                        <span th:text="'üë§ ' + ${tool.seller.fullName}"></span>
                        <p class="product-meta" th:text="${tool.description}"></p>
                    </div>
                </a>
            </div>
        </div>
    </th:block>

    <!-- Pagination -->
    <div class="pagination-wrapper mt-4" th:if="${totalPages > 1}">
        <nav>
            <ul class="pagination justify-content-center">
                <!-- Previous -->
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a href="#" class="page-link"
                       th:data-page="${currentPage - 1}"
                       tabindex="-1">Previous</a>
                </li>

                <!-- Page numbers -->
                <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                    th:classappend="${i == currentPage} ? 'active'">
                    <a href="#" class="page-link" th:data-page="${i}" th:text="${i + 1}"></a>
                </li>

                <!-- Next -->
                <li class="page-item" th:classappend="${currentPage + 1 >= totalPages} ? 'disabled'">
                    <a href="#" class="page-link"
                       th:data-page="${currentPage + 1}">Next</a>
                </li>
            </ul>
        </nav>
    </div>
</div>

</body>
</html>