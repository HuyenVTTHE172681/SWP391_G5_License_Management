<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Manage Tokens</title>
    <link rel="stylesheet" th:href="@{/css/token.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container">
    <h2 class="mb-4 text-success">Token Management</h2>

    <div th:if="${success}" class="alert alert-success text-center" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-danger text-center" th:text="${error}"></div>
    <div th:if="${info}" class="alert alert-info text-center" th:text="${info}"></div>

    <form th:action="@{/seller/token-manage/submit}" method="post">
        <div id="tokenContainer">
            <div class="row mb-2">
                <div class="col-10">
                    <input type="text" name="tokens" class="form-control"
                           placeholder="Enter 6-digit token"
                           required pattern="^[0-9]{6}$" title="Token must have exactly 6 digits">
                </div>
                <div class="col-2">
                    <button type="button" class="btn btn-outline-danger w-100" onclick="removeRow(this)">×</button>
                </div>
            </div>
        </div>

        <button type="button" class="btn btn-sm btn-outline-secondary mt-2" onclick="addRow()">+ Add another</button>

        <div class="mt-4 d-flex justify-content-between">
            <form th:action="@{/seller/token-manage/back}" method="post">
                <button type="submit" class="btn btn-outline-secondary">← Back</button>
            </form>
            <button type="submit" class="btn btn-success">Finalize Tool</button>
        </div>
    </form>
</div>

<script>
    function addRow() {
        const container = document.getElementById('tokenContainer');
        const row = document.createElement('div');
        row.className = 'row mb-2';
        row.innerHTML = `
            <div class="col-10">
                <input type="text" name="tokens" class="form-control"
                       placeholder="Enter 6-digit token"
                       required pattern="^[0-9]{6}$"
                       title="Token must have exactly 6 digits">
            </div>
            <div class="col-2">
                <button type="button" class="btn btn-outline-danger w-100" onclick="removeRow(this)">×</button>
            </div>`;
        container.appendChild(row);
    }
    function removeRow(btn) { btn.closest('.row').remove(); }
</script>

</body>
</html>
