<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>L·ªãch s·ª≠ gia h·∫°n Seller</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <div class="card p-4 shadow">
        <h3 class="text-center mb-4">üìú L·ªãch s·ª≠ gia h·∫°n t√†i kho·∫£n Seller</h3>

        <!-- ‚úÖ FORM L·ªåC D·ªÆ LI·ªÜU -->
        <form action="/seller/history" method="get" class="mb-4">
            <div class="row g-3 align-items-end">
                <div class="col-md-3">
                    <label for="startDate" class="form-label">T·ª´ ng√†y</label>
                    <input type="date" id="startDate" name="startDate" th:value="${startDate}" class="form-control">
                </div>

                <div class="col-md-3">
                    <label for="endDate" class="form-label">ƒê·∫øn ng√†y</label>
                    <input type="date" id="endDate" name="endDate" th:value="${endDate}" class="form-control">
                </div>

                <div class="col-md-3">
                    <label for="packageName" class="form-label">T√™n g√≥i</label>
                    <input type="text" id="packageName" name="packageName"
                           th:value="${packageName}" class="form-control"
                           placeholder="Nh·∫≠p t√™n g√≥i...">
                </div>

                <div class="col-md-2">
                    <label for="status" class="form-label">Tr·∫°ng th√°i</label>
                    <select id="status" name="status" class="form-select">
                        <option value="">-- T·∫•t c·∫£ --</option>
                        <option value="active" th:selected="${status == 'active'}">Ho·∫°t ƒë·ªông</option>
                        <option value="expired" th:selected="${status == 'expired'}">H·∫øt h·∫°n</option>
                    </select>
                </div>

                <div class="col-md-1 text-center">
                    <button type="submit" class="btn btn-primary w-100">L·ªçc</button>
                </div>
            </div>
            <div class="text-end mt-2">
                <a href="/seller/history" class="btn btn-secondary btn-sm">Reset</a>
            </div>
        </form>

        <!-- ‚úÖ B·∫¢NG L·ªäCH S·ª¨ GIA H·∫†N -->
        <table class="table table-bordered text-center align-middle">
            <thead class="table-dark">
            <tr>
                <th>Ng√†y b·∫Øt ƒë·∫ßu</th>
                <th>Ng√†y h·∫øt h·∫°n</th>
                <th>G√≥i</th>
                <th>Gi√°</th>
                <th>Tr·∫°ng th√°i</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="sub : ${subscriptions}">
                <td th:text="${#temporals.format(sub.startDate, 'dd/MM/yyyy')}"></td>
                <td th:text="${#temporals.format(sub.endDate, 'dd/MM/yyyy')}"></td>
                <td th:text="${sub.sellerPackage.packageName}"></td>
                <td th:text="${#numbers.formatDecimal(sub.priceAtPurchase, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
                <td>
                    <span th:text="${sub.endDate.isAfter(T(java.time.LocalDateTime).now()) ? 'ƒêang ho·∫°t ƒë·ªông' : 'H·∫øt h·∫°n'}"
                          th:classappend="${sub.endDate.isAfter(T(java.time.LocalDateTime).now()) ? 'text-success fw-bold' : 'text-danger fw-bold'}"></span>
                </td>
            </tr>
            <tr th:if="${#lists.isEmpty(subscriptions)}">
                <td colspan="5" class="text-muted fst-italic">Kh√¥ng c√≥ d·ªØ li·ªáu ph√π h·ª£p v·ªõi b·ªô l·ªçc.</td>
            </tr>
            </tbody>
        </table>

        <!-- ‚úÖ N√öT GIA H·∫†N -->
        <div class="text-center mt-4">
            <a th:href="@{/seller/renew}" class="btn btn-dark px-4">Gia h·∫°n th√™m</a>
            <a th:href="@{/seller/tools}" class="btn btn-dark px-4">V·ªÅ trang ch·ªß</a>
        </div>

    </div>
</div>
</body>
</html>
